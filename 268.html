<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p268" style="overflow: hidden; position: relative; background-color: white; width: 770px; height: 1010px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_268{left:110px;bottom:894px;letter-spacing:-0.03px;}
#t2_268{left:110px;bottom:869px;letter-spacing:-0.01px;word-spacing:0.47px;}
#t3_268{left:110px;bottom:850px;letter-spacing:0.01px;word-spacing:1.23px;}
#t4_268{left:575px;bottom:850px;letter-spacing:-0.01px;word-spacing:1.25px;}
#t5_268{left:656px;bottom:850px;}
#t6_268{left:110px;bottom:831px;word-spacing:0.16px;}
#t7_268{left:110px;bottom:811px;letter-spacing:0.12px;}
#t8_268{left:148px;bottom:811px;word-spacing:2.81px;}
#t9_268{left:110px;bottom:790px;letter-spacing:-0.01px;word-spacing:0.81px;}
#ta_268{left:585px;bottom:791px;letter-spacing:0.12px;}
#tb_268{left:628px;bottom:790px;letter-spacing:0.02px;}
#tc_268{left:110px;bottom:770px;letter-spacing:0.03px;word-spacing:-0.02px;}
#td_268{left:310px;bottom:771px;letter-spacing:0.12px;}
#te_268{left:352px;bottom:770px;word-spacing:0.01px;}
#tf_268{left:110px;bottom:742px;letter-spacing:-0.01px;word-spacing:1.7px;}
#tg_268{left:110px;bottom:723px;letter-spacing:0.01px;word-spacing:1.33px;}
#th_268{left:110px;bottom:703px;word-spacing:2.65px;}
#ti_268{left:110px;bottom:684px;letter-spacing:0.01px;word-spacing:1.52px;}
#tj_268{left:110px;bottom:665px;letter-spacing:0.02px;word-spacing:1.31px;}
#tk_268{left:110px;bottom:646px;word-spacing:0.22px;}
#tl_268{left:110px;bottom:626px;letter-spacing:-0.01px;word-spacing:2.23px;}
#tm_268{left:110px;bottom:607px;word-spacing:0.5px;}
#tn_268{left:110px;bottom:588px;letter-spacing:0.02px;word-spacing:1.16px;}
#to_268{left:198px;bottom:588px;letter-spacing:-0.01px;word-spacing:1.19px;}
#tp_268{left:279px;bottom:588px;letter-spacing:0.02px;word-spacing:1.16px;}
#tq_268{left:110px;bottom:569px;word-spacing:0.43px;}
#tr_268{left:110px;bottom:549px;letter-spacing:0.01px;word-spacing:1.4px;}
#ts_268{left:110px;bottom:529px;letter-spacing:0.02px;}
#tt_268{left:407px;bottom:530px;letter-spacing:0.12px;}
#tu_268{left:518px;bottom:529px;letter-spacing:0.02px;}
#tv_268{left:546px;bottom:530px;letter-spacing:0.12px;}
#tw_268{left:607px;bottom:529px;}
#tx_268{left:110px;bottom:501px;letter-spacing:-0.01px;word-spacing:1.27px;}
#ty_268{left:110px;bottom:482px;letter-spacing:-0.05px;word-spacing:0.44px;}
#tz_268{left:110px;bottom:462px;letter-spacing:-0.01px;word-spacing:0.17px;}
#t10_268{left:579px;bottom:462px;letter-spacing:-0.01px;word-spacing:0.03px;}
#t11_268{left:110px;bottom:443px;letter-spacing:-0.01px;word-spacing:0.74px;}
#t12_268{left:110px;bottom:424px;letter-spacing:0.01px;word-spacing:2.24px;}
#t13_268{left:110px;bottom:404px;letter-spacing:-0.01px;word-spacing:0.31px;}
#t14_268{left:599px;bottom:404px;letter-spacing:0.12px;}
#t15_268{left:110px;bottom:383px;letter-spacing:0.02px;}
#t16_268{left:138px;bottom:384px;letter-spacing:0.12px;}
#t17_268{left:188px;bottom:383px;letter-spacing:0.01px;word-spacing:0.22px;}
#t18_268{left:110px;bottom:363px;letter-spacing:0.02px;word-spacing:0.29px;}
#t19_268{left:204px;bottom:364px;letter-spacing:0.12px;}
#t1a_268{left:291px;bottom:363px;letter-spacing:0.02px;}
#t1b_268{left:320px;bottom:364px;letter-spacing:0.12px;}
#t1c_268{left:415px;bottom:363px;letter-spacing:-0.02px;word-spacing:0.33px;}
#t1d_268{left:110px;bottom:344px;letter-spacing:0.02px;}
#t1e_268{left:110px;bottom:316px;letter-spacing:-0.02px;word-spacing:0.43px;}
#t1f_268{left:198px;bottom:316px;letter-spacing:0.02px;}
#t1g_268{left:224px;bottom:316px;letter-spacing:0.02px;word-spacing:0.39px;}
#t1h_268{left:110px;bottom:296px;letter-spacing:-0.01px;word-spacing:1.8px;}
#t1i_268{left:110px;bottom:277px;word-spacing:2.54px;}
#t1j_268{left:110px;bottom:258px;letter-spacing:0.02px;word-spacing:0.24px;}
#t1k_268{left:110px;bottom:239px;letter-spacing:0.02px;word-spacing:2.45px;}
#t1l_268{left:110px;bottom:219px;letter-spacing:0.01px;word-spacing:0.01px;}
#t1m_268{left:136px;bottom:194px;letter-spacing:-0.01px;}
#t1n_268{left:175px;bottom:194px;letter-spacing:-0.01px;}
#t1o_268{left:220px;bottom:194px;}
#t1p_268{left:233px;bottom:194px;}
#t1q_268{left:240px;bottom:194px;letter-spacing:-0.01px;}
#t1r_268{left:292px;bottom:194px;letter-spacing:-0.01px;}
#t1s_268{left:324px;bottom:194px;letter-spacing:-0.01px;}
#t1t_268{left:162px;bottom:178px;letter-spacing:-0.01px;}
#t1u_268{left:162px;bottom:162px;letter-spacing:-0.01px;}
#t1v_268{left:220px;bottom:162px;letter-spacing:-0.01px;}
#t1w_268{left:266px;bottom:162px;}
#t1x_268{left:272px;bottom:162px;letter-spacing:-0.01px;}
#t1y_268{left:292px;bottom:162px;}
#t1z_268{left:305px;bottom:162px;}
#t20_268{left:311px;bottom:162px;letter-spacing:-0.01px;}
#t21_268{left:162px;bottom:147px;letter-spacing:-0.01px;}
#t22_268{left:220px;bottom:147px;letter-spacing:-0.01px;}
#t23_268{left:240px;bottom:147px;}
#t24_268{left:246px;bottom:147px;letter-spacing:-0.01px;}
#t25_268{left:266px;bottom:147px;}
#t26_268{left:279px;bottom:147px;letter-spacing:-0.01px;}
#t27_268{left:305px;bottom:147px;}
#t28_268{left:318px;bottom:147px;letter-spacing:-0.01px;}
#t29_268{left:337px;bottom:147px;letter-spacing:-0.01px;}
#t2a_268{left:162px;bottom:131px;letter-spacing:-0.01px;}
#t2b_268{left:201px;bottom:131px;letter-spacing:-0.01px;}
#t2c_268{left:233px;bottom:131px;}
#t2d_268{left:246px;bottom:131px;letter-spacing:-0.01px;}
#t2e_268{left:272px;bottom:131px;letter-spacing:-0.01px;}
#t2f_268{left:337px;bottom:131px;letter-spacing:-0.01px;}
#t2g_268{left:350px;bottom:131px;}
#t2h_268{left:357px;bottom:131px;}
#t2i_268{left:370px;bottom:131px;}
#t2j_268{left:376px;bottom:131px;}
#t2k_268{left:389px;bottom:131px;}
#t2l_268{left:396px;bottom:131px;}
#t2m_268{left:409px;bottom:131px;}
#t2n_268{left:415px;bottom:131px;}
#t2o_268{left:428px;bottom:131px;letter-spacing:-0.01px;}
#t2p_268{left:441px;bottom:131px;}
#t2q_268{left:454px;bottom:131px;letter-spacing:-0.01px;}
#t2r_268{left:467px;bottom:131px;}
#t2s_268{left:480px;bottom:131px;letter-spacing:-0.01px;}
#t2t_268{left:493px;bottom:131px;}
#t2u_268{left:506px;bottom:131px;letter-spacing:-0.01px;}
#t2v_268{left:526px;bottom:131px;letter-spacing:-0.01px;}
#t2w_268{left:162px;bottom:116px;letter-spacing:-0.01px;}
#t2x_268{left:201px;bottom:116px;letter-spacing:-0.01px;}
#t2y_268{left:240px;bottom:116px;}
#t2z_268{left:253px;bottom:116px;letter-spacing:-0.01px;}
#t30_268{left:279px;bottom:116px;letter-spacing:-0.01px;}
#t31_268{left:344px;bottom:116px;letter-spacing:-0.01px;}
#t32_268{left:357px;bottom:116px;}
#t33_268{left:363px;bottom:116px;}
#t34_268{left:370px;bottom:116px;}
#t35_268{left:383px;bottom:116px;}
#t36_268{left:389px;bottom:116px;}
#t37_268{left:396px;bottom:116px;}
#t38_268{left:409px;bottom:116px;}
#t39_268{left:415px;bottom:116px;}
#t3a_268{left:422px;bottom:116px;}
#t3b_268{left:435px;bottom:116px;}
#t3c_268{left:441px;bottom:116px;}
#t3d_268{left:448px;bottom:116px;}
#t3e_268{left:461px;bottom:116px;}
#t3f_268{left:467px;bottom:116px;letter-spacing:-0.01px;}
#t3g_268{left:480px;bottom:116px;}
#t3h_268{left:493px;bottom:116px;}
#t3i_268{left:500px;bottom:116px;letter-spacing:-0.01px;}
#t3j_268{left:513px;bottom:116px;}
#t3k_268{left:526px;bottom:116px;}
#t3l_268{left:532px;bottom:116px;letter-spacing:-0.01px;}
#t3m_268{left:545px;bottom:116px;}
#t3n_268{left:558px;bottom:116px;}
#t3o_268{left:565px;bottom:116px;letter-spacing:-0.01px;}
#t3p_268{left:584px;bottom:116px;letter-spacing:-0.01px;}
#t3q_268{left:110px;bottom:59px;letter-spacing:-0.08px;}
#t3r_268{left:141px;bottom:59px;}
#t3s_268{left:157px;bottom:59px;letter-spacing:-0.09px;}

.s1_268{font-size:29px;font-family:MyriadPro-SemiboldCond_7yc;color:#000;}
.s2_268{font-size:16px;font-family:MinionPro-Regular_7yv;color:#000;}
.s3_268{font-size:16px;font-family:MinionPro-Regular_7yv;color:#900;}
.s4_268{font-size:15px;font-family:UbuntuMono-Regular_7zr;color:#000;}
.s5_268{font-size:13px;font-family:UbuntuMono-Bold_7zh;color:#069;}
.s6_268{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#008;}
.s7_268{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#555;}
.s8_268{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#000;}
.s9_268{font-size:13px;font-family:UbuntuMono-Italic_7zm;color:#35586C;}
.sa_268{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#F60;}
.sb_268{font-size:14px;font-family:MyriadPro-SemiboldCond_7yc;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts268" type="text/css" >

@font-face {
	font-family: MinionPro-Regular_7yv;
	src: url("fonts/MinionPro-Regular_7yv.woff") format("woff");
}

@font-face {
	font-family: MyriadPro-SemiboldCond_7yc;
	src: url("fonts/MyriadPro-SemiboldCond_7yc.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Bold_7zh;
	src: url("fonts/UbuntuMono-Bold_7zh.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Italic_7zm;
	src: url("fonts/UbuntuMono-Italic_7zm.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Regular_7zr;
	src: url("fonts/UbuntuMono-Regular_7zr.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg268Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg268" style="-webkit-user-select: none;"><svg id="pdf268" width="770" height="1010" viewBox="0 0 770 1010" style="width:770px; height:1010px; -moz-transform:scale(1); z-index: 0; isolation: isolate;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<clipPath id="c0_268"><path d="M110,930.3v-4.7H660v4.7Z"/></clipPath>
<style type="text/css"><![CDATA[
.g0_268{
fill: none;
stroke: #000;
stroke-width: 0.381;
stroke-linecap: round;
stroke-miterlimit: 10;
}
]]></style>
</defs>
<path clip-path="url(#c0_268)" d="M660,927.9H110" class="g0_268"/>
</svg></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_268" class="t s1_268">10.1 Modules with Classes, Objects, and Closures </span>
<span id="t2_268" class="t s2_268">Though it may be obvious, it is worth pointing out that one of the important features </span>
<span id="t3_268" class="t s2_268">of classes is that they act as modules for their methods. Think back to </span><span id="t4_268" class="t s3_268">Example 9-8</span><span id="t5_268" class="t s2_268">. </span>
<span id="t6_268" class="t s2_268">That example defined a number of different classes, all of which had a method named </span>
<span id="t7_268" class="t s4_268">has()</span><span id="t8_268" class="t s2_268">. But you would have no problem writing a program that used multiple set </span>
<span id="t9_268" class="t s2_268">classes from that example: there is no danger that the implementation of </span><span id="ta_268" class="t s4_268">has() </span><span id="tb_268" class="t s2_268">from </span>
<span id="tc_268" class="t s2_268">SingletonSet will overwrite the </span><span id="td_268" class="t s4_268">has() </span><span id="te_268" class="t s2_268">method of BitSet, for example. </span>
<span id="tf_268" class="t s2_268">The reason that the methods of one class are independent of the methods of other, </span>
<span id="tg_268" class="t s2_268">unrelated classes is that the methods of each class are defined as properties of inde‐ </span>
<span id="th_268" class="t s2_268">pendent prototype objects. The reason that classes are modular is that objects are </span>
<span id="ti_268" class="t s2_268">modular: defining a property in a JavaScript object is a lot like declaring a variable, </span>
<span id="tj_268" class="t s2_268">but adding properties to objects does not affect the global namespace of a program, </span>
<span id="tk_268" class="t s2_268">nor does it affect the properties of other objects. JavaScript defines quite a few mathe‐ </span>
<span id="tl_268" class="t s2_268">matical functions and constants, but instead of defining them all globally, they are </span>
<span id="tm_268" class="t s2_268">grouped as properties of a single global Math object. This same technique could have </span>
<span id="tn_268" class="t s2_268">been used in </span><span id="to_268" class="t s3_268">Example 9-8</span><span id="tp_268" class="t s2_268">. Instead of defining global classes with names like Single‐ </span>
<span id="tq_268" class="t s2_268">tonSet and BitSet, that example could have been written to define only a single global </span>
<span id="tr_268" class="t s2_268">Sets object, with properties referencing the various classes. Users of this Sets library </span>
<span id="ts_268" class="t s2_268">could then refer to the classes with names like </span><span id="tt_268" class="t s4_268">Sets.Singleton </span><span id="tu_268" class="t s2_268">and </span><span id="tv_268" class="t s4_268">Sets.Bit</span><span id="tw_268" class="t s2_268">. </span>
<span id="tx_268" class="t s2_268">Using classes and objects for modularity is a common and useful technique in Java‐ </span>
<span id="ty_268" class="t s2_268">Script programming, but it doesn’t go far enough. In particular, it doesn’t offer us any </span>
<span id="tz_268" class="t s2_268">way to hide internal implementation details inside the module. Consider </span><span id="t10_268" class="t s3_268">Example 9-8 </span>
<span id="t11_268" class="t s2_268">again. If we were writing that example as a module, maybe we would have wanted to </span>
<span id="t12_268" class="t s2_268">keep the various abstract classes internal to the module, only making the concrete </span>
<span id="t13_268" class="t s2_268">subclasses available to users of the module. Similarly, in the BitSet class, the </span><span id="t14_268" class="t s4_268">_valid() </span>
<span id="t15_268" class="t s2_268">and </span><span id="t16_268" class="t s4_268">_has() </span><span id="t17_268" class="t s2_268">methods are internal utilities that should not really be exposed to users of </span>
<span id="t18_268" class="t s2_268">the class. And </span><span id="t19_268" class="t s4_268">BitSet.bits </span><span id="t1a_268" class="t s2_268">and </span><span id="t1b_268" class="t s4_268">BitSet.masks </span><span id="t1c_268" class="t s2_268">are implementation details that would </span>
<span id="t1d_268" class="t s2_268">be better off hidden. </span>
<span id="t1e_268" class="t s2_268">As we saw in </span><span id="t1f_268" class="t s3_268">§8.6</span><span id="t1g_268" class="t s2_268">, local variables and nested functions declared within a function are </span>
<span id="t1h_268" class="t s2_268">private to that function. This means that we can use immediately invoked function </span>
<span id="t1i_268" class="t s2_268">expressions to achieve a kind of modularity by leaving the implementation details </span>
<span id="t1j_268" class="t s2_268">and utility functions hidden within the enclosing function but making the public API </span>
<span id="t1k_268" class="t s2_268">of the module the return value of the function. In the case of the BitSet class, we </span>
<span id="t1l_268" class="t s2_268">might structure the module like this: </span>
<span id="t1m_268" class="t s5_268">const </span><span id="t1n_268" class="t s6_268">BitSet </span><span id="t1o_268" class="t s7_268">= </span><span id="t1p_268" class="t s8_268">(</span><span id="t1q_268" class="t s5_268">function</span><span id="t1r_268" class="t s8_268">() { </span><span id="t1s_268" class="t s9_268">// Set BitSet to the return value of this function </span>
<span id="t1t_268" class="t s9_268">// Private implementation details here </span>
<span id="t1u_268" class="t s5_268">function </span><span id="t1v_268" class="t s6_268">isValid</span><span id="t1w_268" class="t s8_268">(</span><span id="t1x_268" class="t s6_268">set</span><span id="t1y_268" class="t s8_268">, </span><span id="t1z_268" class="t s6_268">n</span><span id="t20_268" class="t s8_268">) { ... } </span>
<span id="t21_268" class="t s5_268">function </span><span id="t22_268" class="t s6_268">has</span><span id="t23_268" class="t s8_268">(</span><span id="t24_268" class="t s6_268">set</span><span id="t25_268" class="t s8_268">, </span><span id="t26_268" class="t s5_268">byte</span><span id="t27_268" class="t s8_268">, </span><span id="t28_268" class="t s6_268">bit</span><span id="t29_268" class="t s8_268">) { ... } </span>
<span id="t2a_268" class="t s5_268">const </span><span id="t2b_268" class="t s6_268">BITS </span><span id="t2c_268" class="t s7_268">= </span><span id="t2d_268" class="t s5_268">new </span><span id="t2e_268" class="t s6_268">Uint8Array</span><span id="t2f_268" class="t s8_268">([</span><span id="t2g_268" class="t sa_268">1</span><span id="t2h_268" class="t s8_268">, </span><span id="t2i_268" class="t sa_268">2</span><span id="t2j_268" class="t s8_268">, </span><span id="t2k_268" class="t sa_268">4</span><span id="t2l_268" class="t s8_268">, </span><span id="t2m_268" class="t sa_268">8</span><span id="t2n_268" class="t s8_268">, </span><span id="t2o_268" class="t sa_268">16</span><span id="t2p_268" class="t s8_268">, </span><span id="t2q_268" class="t sa_268">32</span><span id="t2r_268" class="t s8_268">, </span><span id="t2s_268" class="t sa_268">64</span><span id="t2t_268" class="t s8_268">, </span><span id="t2u_268" class="t sa_268">128</span><span id="t2v_268" class="t s8_268">]); </span>
<span id="t2w_268" class="t s5_268">const </span><span id="t2x_268" class="t s6_268">MASKS </span><span id="t2y_268" class="t s7_268">= </span><span id="t2z_268" class="t s5_268">new </span><span id="t30_268" class="t s6_268">Uint8Array</span><span id="t31_268" class="t s8_268">([</span><span id="t32_268" class="t s7_268">~</span><span id="t33_268" class="t sa_268">1</span><span id="t34_268" class="t s8_268">, </span><span id="t35_268" class="t s7_268">~</span><span id="t36_268" class="t sa_268">2</span><span id="t37_268" class="t s8_268">, </span><span id="t38_268" class="t s7_268">~</span><span id="t39_268" class="t sa_268">4</span><span id="t3a_268" class="t s8_268">, </span><span id="t3b_268" class="t s7_268">~</span><span id="t3c_268" class="t sa_268">8</span><span id="t3d_268" class="t s8_268">, </span><span id="t3e_268" class="t s7_268">~</span><span id="t3f_268" class="t sa_268">16</span><span id="t3g_268" class="t s8_268">, </span><span id="t3h_268" class="t s7_268">~</span><span id="t3i_268" class="t sa_268">32</span><span id="t3j_268" class="t s8_268">, </span><span id="t3k_268" class="t s7_268">~</span><span id="t3l_268" class="t sa_268">64</span><span id="t3m_268" class="t s8_268">, </span><span id="t3n_268" class="t s7_268">~</span><span id="t3o_268" class="t sa_268">128</span><span id="t3p_268" class="t s8_268">]); </span>
<span id="t3q_268" class="t sb_268">250 </span><span id="t3r_268" class="t sb_268">| </span><span id="t3s_268" class="t sb_268">Chapter 10: Modules </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
