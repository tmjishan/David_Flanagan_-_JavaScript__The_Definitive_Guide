<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p602" style="overflow: hidden; position: relative; background-color: white; width: 770px; height: 1010px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_602{left:110px;bottom:907px;letter-spacing:-0.01px;word-spacing:1.39px;}
#t2_602{left:110px;bottom:888px;letter-spacing:0.01px;word-spacing:3.77px;}
#t3_602{left:110px;bottom:869px;word-spacing:0.94px;}
#t4_602{left:110px;bottom:849px;letter-spacing:0.01px;word-spacing:0.24px;}
#t5_602{left:110px;bottom:830px;letter-spacing:0.01px;word-spacing:0.79px;}
#t6_602{left:110px;bottom:811px;word-spacing:1.34px;}
#t7_602{left:110px;bottom:792px;letter-spacing:0.02px;}
#t8_602{left:110px;bottom:763px;letter-spacing:-0.03px;word-spacing:0.29px;}
#t9_602{left:110px;bottom:744px;letter-spacing:0.01px;word-spacing:1.01px;}
#ta_602{left:110px;bottom:725px;letter-spacing:0.01px;word-spacing:0.59px;}
#tb_602{left:110px;bottom:705px;letter-spacing:-0.01px;word-spacing:2.2px;}
#tc_602{left:110px;bottom:686px;word-spacing:0.49px;}
#td_602{left:110px;bottom:667px;letter-spacing:0.01px;word-spacing:0.38px;}
#te_602{left:332px;bottom:667px;letter-spacing:-0.02px;word-spacing:0.04px;}
#tf_602{left:403px;bottom:667px;letter-spacing:0.02px;word-spacing:0.37px;}
#tg_602{left:110px;bottom:648px;letter-spacing:-0.03px;word-spacing:3.17px;}
#th_602{left:110px;bottom:628px;word-spacing:0.16px;}
#ti_602{left:323px;bottom:628px;letter-spacing:-0.04px;word-spacing:0.05px;}
#tj_602{left:444px;bottom:628px;word-spacing:0.16px;}
#tk_602{left:110px;bottom:608px;word-spacing:1.25px;}
#tl_602{left:586px;bottom:609px;letter-spacing:0.12px;}
#tm_602{left:622px;bottom:608px;letter-spacing:0.02px;word-spacing:1.23px;}
#tn_602{left:110px;bottom:589px;word-spacing:0.62px;}
#to_602{left:110px;bottom:570px;letter-spacing:0.02px;word-spacing:3.81px;}
#tp_602{left:110px;bottom:550px;letter-spacing:0.01px;word-spacing:1.21px;}
#tq_602{left:110px;bottom:531px;word-spacing:0.81px;}
#tr_602{left:110px;bottom:512px;letter-spacing:0.01px;word-spacing:1.59px;}
#ts_602{left:110px;bottom:492px;letter-spacing:0.01px;word-spacing:0.01px;}
#tt_602{left:561px;bottom:492px;letter-spacing:0.12px;}
#tu_602{left:592px;bottom:492px;}
#tv_602{left:110px;bottom:462px;letter-spacing:0.01px;word-spacing:1.59px;}
#tw_602{left:524px;bottom:463px;letter-spacing:0.12px;}
#tx_602{left:605px;bottom:462px;letter-spacing:0.02px;}
#ty_602{left:110px;bottom:443px;letter-spacing:0.01px;word-spacing:0.84px;}
#tz_602{left:110px;bottom:424px;letter-spacing:0.02px;}
#t10_602{left:136px;bottom:398px;letter-spacing:-0.01px;}
#t11_602{left:175px;bottom:398px;}
#t12_602{left:194px;bottom:398px;}
#t13_602{left:207px;bottom:398px;letter-spacing:-0.01px;}
#t14_602{left:253px;bottom:398px;}
#t15_602{left:259px;bottom:398px;letter-spacing:-0.01px;}
#t16_602{left:285px;bottom:398px;}
#t17_602{left:311px;bottom:398px;letter-spacing:-0.01px;}
#t18_602{left:136px;bottom:367px;letter-spacing:-0.01px;}
#t19_602{left:136px;bottom:351px;letter-spacing:-0.01px;}
#t1a_602{left:136px;bottom:336px;letter-spacing:-0.01px;}
#t1b_602{left:136px;bottom:320px;letter-spacing:-0.01px;}
#t1c_602{left:194px;bottom:320px;letter-spacing:-0.01px;}
#t1d_602{left:285px;bottom:320px;}
#t1e_602{left:292px;bottom:320px;letter-spacing:-0.01px;}
#t1f_602{left:318px;bottom:320px;}
#t1g_602{left:331px;bottom:320px;letter-spacing:-0.01px;}
#t1h_602{left:383px;bottom:320px;letter-spacing:-0.01px;}
#t1i_602{left:162px;bottom:305px;letter-spacing:-0.01px;}
#t1j_602{left:175px;bottom:305px;}
#t1k_602{left:181px;bottom:305px;letter-spacing:-0.01px;}
#t1l_602{left:233px;bottom:305px;}
#t1m_602{left:240px;bottom:305px;letter-spacing:-0.01px;}
#t1n_602{left:266px;bottom:305px;}
#t1o_602{left:279px;bottom:305px;letter-spacing:-0.01px;}
#t1p_602{left:318px;bottom:305px;letter-spacing:-0.01px;}
#t1q_602{left:337px;bottom:305px;letter-spacing:-0.01px;}
#t1r_602{left:357px;bottom:305px;}
#t1s_602{left:370px;bottom:305px;letter-spacing:-0.01px;}
#t1t_602{left:396px;bottom:305px;}
#t1u_602{left:409px;bottom:305px;}
#t1v_602{left:428px;bottom:305px;}
#t1w_602{left:188px;bottom:289px;letter-spacing:-0.01px;}
#t1x_602{left:207px;bottom:289px;}
#t1y_602{left:214px;bottom:289px;letter-spacing:-0.01px;}
#t1z_602{left:233px;bottom:289px;letter-spacing:-0.01px;}
#t20_602{left:279px;bottom:289px;letter-spacing:-0.01px;}
#t21_602{left:214px;bottom:273px;letter-spacing:-0.01px;}
#t22_602{left:259px;bottom:273px;}
#t23_602{left:266px;bottom:273px;letter-spacing:-0.01px;}
#t24_602{left:298px;bottom:273px;}
#t25_602{left:305px;bottom:273px;letter-spacing:-0.01px;}
#t26_602{left:324px;bottom:273px;letter-spacing:-0.01px;}
#t27_602{left:214px;bottom:258px;letter-spacing:-0.01px;}
#t28_602{left:266px;bottom:258px;}
#t29_602{left:272px;bottom:258px;letter-spacing:-0.01px;}
#t2a_602{left:298px;bottom:258px;letter-spacing:-0.01px;}
#t2b_602{left:214px;bottom:242px;letter-spacing:-0.01px;}
#t2c_602{left:253px;bottom:242px;}
#t2d_602{left:188px;bottom:227px;}
#t2e_602{left:188px;bottom:211px;letter-spacing:-0.01px;}
#t2f_602{left:214px;bottom:211px;letter-spacing:-0.01px;}
#t2g_602{left:246px;bottom:211px;}
#t2h_602{left:259px;bottom:211px;letter-spacing:-0.01px;}
#t2i_602{left:285px;bottom:211px;}
#t2j_602{left:188px;bottom:196px;letter-spacing:-0.01px;}
#t2k_602{left:214px;bottom:196px;}
#t2l_602{left:214px;bottom:180px;letter-spacing:-0.01px;}
#t2m_602{left:246px;bottom:180px;}
#t2n_602{left:259px;bottom:180px;letter-spacing:-0.01px;}
#t2o_602{left:285px;bottom:180px;}
#t2p_602{left:292px;bottom:180px;letter-spacing:-0.01px;}
#t2q_602{left:324px;bottom:180px;}
#t2r_602{left:331px;bottom:180px;letter-spacing:-0.01px;}
#t2s_602{left:357px;bottom:180px;letter-spacing:-0.01px;}
#t2t_602{left:188px;bottom:164px;}
#t2u_602{left:201px;bottom:164px;letter-spacing:-0.01px;}
#t2v_602{left:233px;bottom:164px;}
#t2w_602{left:240px;bottom:164px;}
#t2x_602{left:246px;bottom:164px;letter-spacing:-0.01px;}
#t2y_602{left:279px;bottom:164px;letter-spacing:-0.01px;}
#t2z_602{left:214px;bottom:149px;letter-spacing:-0.01px;}
#t30_602{left:259px;bottom:149px;}
#t31_602{left:266px;bottom:149px;letter-spacing:-0.01px;}
#t32_602{left:298px;bottom:149px;}
#t33_602{left:305px;bottom:149px;}
#t34_602{left:311px;bottom:149px;letter-spacing:-0.01px;}
#t35_602{left:188px;bottom:133px;}
#t36_602{left:188px;bottom:118px;letter-spacing:-0.01px;}
#t37_602{left:240px;bottom:118px;}
#t38_602{left:246px;bottom:118px;letter-spacing:-0.01px;}
#t39_602{left:272px;bottom:118px;letter-spacing:-0.01px;}
#t3a_602{left:110px;bottom:59px;letter-spacing:-0.08px;}
#t3b_602{left:141px;bottom:59px;}
#t3c_602{left:157px;bottom:59px;letter-spacing:-0.08px;}

.s1_602{font-size:16px;font-family:MinionPro-Regular_7yv;color:#000;}
.s2_602{font-size:16px;font-family:MinionPro-Regular_7yv;color:#900;}
.s3_602{font-size:16px;font-family:MinionPro-It_7xz;color:#000;}
.s4_602{font-size:15px;font-family:UbuntuMono-Regular_7zr;color:#000;}
.s5_602{font-size:13px;font-family:UbuntuMono-Bold_7zh;color:#069;}
.s6_602{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#008;}
.s7_602{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#555;}
.s8_602{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#000;}
.s9_602{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#C30;}
.sa_602{font-size:13px;font-family:UbuntuMono-Italic_7zm;color:#35586C;}
.sb_602{font-size:14px;font-family:MyriadPro-SemiboldCond_7yc;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts602" type="text/css" >

@font-face {
	font-family: MinionPro-It_7xz;
	src: url("fonts/MinionPro-It_7xz.woff") format("woff");
}

@font-face {
	font-family: MinionPro-Regular_7yv;
	src: url("fonts/MinionPro-Regular_7yv.woff") format("woff");
}

@font-face {
	font-family: MyriadPro-SemiboldCond_7yc;
	src: url("fonts/MyriadPro-SemiboldCond_7yc.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Bold_7zh;
	src: url("fonts/UbuntuMono-Bold_7zh.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Italic_7zm;
	src: url("fonts/UbuntuMono-Italic_7zm.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Regular_7zr;
	src: url("fonts/UbuntuMono-Regular_7zr.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg602Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg602" style="-webkit-user-select: none;"><svg id="pdf602" width="770" height="1010" viewBox="0 0 770 1010" style="width:770px; height:1010px; -moz-transform:scale(1); z-index: 0; isolation: isolate;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<clipPath id="c0_602"><path d="M110,930.3v-4.7H660v4.7Z"/></clipPath>
<style type="text/css"><![CDATA[
.g0_602{
fill: none;
stroke: #000;
stroke-width: 0.381;
stroke-linecap: round;
stroke-miterlimit: 10;
}
]]></style>
</defs>
<path clip-path="url(#c0_602)" d="M660,927.9H110" class="g0_602"/>
</svg></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_602" class="t s1_602">were still the norm and there really were milliseconds of blocking “seek time” while </span>
<span id="t2_602" class="t s1_602">waiting for the disc to spin around before a file operation could begin. And in </span>
<span id="t3_602" class="t s1_602">modern datacenters, the “local” filesystem may actually be across the network some‐ </span>
<span id="t4_602" class="t s1_602">where with network latencies on top of drive latencies. But even if reading a file asyn‐ </span>
<span id="t5_602" class="t s1_602">chronously seems normal to you, Node takes it still further: the default functions for </span>
<span id="t6_602" class="t s1_602">initiating a network connection or looking up a file modification time, for example, </span>
<span id="t7_602" class="t s1_602">are also nonblocking. </span>
<span id="t8_602" class="t s1_602">Some functions in Node’s API are synchronous but nonblocking: they run to comple‐ </span>
<span id="t9_602" class="t s1_602">tion and return without ever needing to block. But most of the interesting functions </span>
<span id="ta_602" class="t s1_602">perform some kind of input or output, and these are asynchronous functions so they </span>
<span id="tb_602" class="t s1_602">can avoid even the tiniest amount of blocking. Node was created before JavaScript </span>
<span id="tc_602" class="t s1_602">had a Promise class, so asynchronous Node APIs are callback-based. (If you have not </span>
<span id="td_602" class="t s1_602">yet read or have already forgotten </span><span id="te_602" class="t s2_602">Chapter 13</span><span id="tf_602" class="t s1_602">, this would be a good time to skip back </span>
<span id="tg_602" class="t s1_602">to that chapter.) Generally, the last argument you pass to an asynchronous Node </span>
<span id="th_602" class="t s1_602">function is a callback. Node uses </span><span id="ti_602" class="t s3_602" data-mappings='[[6,"fi"]]'>error-ﬁrst callbacks</span><span id="tj_602" class="t s1_602">, which are typically invoked with </span>
<span id="tk_602" class="t s1_602">two arguments. The first argument to an error-first callback is normally </span><span id="tl_602" class="t s4_602">null </span><span id="tm_602" class="t s1_602">in the </span>
<span id="tn_602" class="t s1_602">case where no error occurred, and the second argument is whatever data or response </span>
<span id="to_602" class="t s1_602">was produced by the original asynchronous function you called. The reason for </span>
<span id="tp_602" class="t s1_602">putting the error argument first is to make it impossible for you to omit it, and you </span>
<span id="tq_602" class="t s1_602">should always check for a non-null value in this argument. If it is an Error object, or </span>
<span id="tr_602" class="t s1_602">even an integer error code or string error message, then something went wrong. In </span>
<span id="ts_602" class="t s1_602">this case, the second argument to your callback function is likely to be </span><span id="tt_602" class="t s4_602">null</span><span id="tu_602" class="t s1_602">. </span>
<span id="tv_602" class="t s1_602">The following code demonstrates how to use the nonblocking </span><span id="tw_602" class="t s4_602">readFile() </span><span id="tx_602" class="t s1_602">function </span>
<span id="ty_602" class="t s1_602">to read a configuration file, parse it as JSON, and then pass the parsed configuration </span>
<span id="tz_602" class="t s1_602">object to another callback: </span>
<span id="t10_602" class="t s5_602">const </span><span id="t11_602" class="t s6_602">fs </span><span id="t12_602" class="t s7_602">= </span><span id="t13_602" class="t s6_602">require</span><span id="t14_602" class="t s8_602">(</span><span id="t15_602" class="t s9_602">"fs"</span><span id="t16_602" class="t s8_602">); </span><span id="t17_602" class="t sa_602">// Require the filesystem module </span>
<span id="t18_602" class="t sa_602">// Read a config file, parse its contents as JSON, and pass the </span>
<span id="t19_602" class="t sa_602">// resulting value to the callback. If anything goes wrong, </span>
<span id="t1a_602" class="t sa_602">// print an error message to stderr and invoke the callback with null </span>
<span id="t1b_602" class="t s5_602">function </span><span id="t1c_602" class="t s6_602">readConfigFile</span><span id="t1d_602" class="t s8_602">(</span><span id="t1e_602" class="t s6_602">path</span><span id="t1f_602" class="t s8_602">, </span><span id="t1g_602" class="t s6_602">callback</span><span id="t1h_602" class="t s8_602">) { </span>
<span id="t1i_602" class="t s6_602">fs</span><span id="t1j_602" class="t s8_602">.</span><span id="t1k_602" class="t s6_602">readFile</span><span id="t1l_602" class="t s8_602">(</span><span id="t1m_602" class="t s6_602">path</span><span id="t1n_602" class="t s8_602">, </span><span id="t1o_602" class="t s9_602">"utf8"</span><span id="t1p_602" class="t s8_602">, (</span><span id="t1q_602" class="t s6_602">err</span><span id="t1r_602" class="t s8_602">, </span><span id="t1s_602" class="t s6_602">text</span><span id="t1t_602" class="t s8_602">) </span><span id="t1u_602" class="t s7_602">=&gt; </span><span id="t1v_602" class="t s8_602">{ </span>
<span id="t1w_602" class="t s5_602">if </span><span id="t1x_602" class="t s8_602">(</span><span id="t1y_602" class="t s6_602">err</span><span id="t1z_602" class="t s8_602">) { </span><span id="t20_602" class="t sa_602">// Something went wrong reading the file </span>
<span id="t21_602" class="t s6_602">console</span><span id="t22_602" class="t s8_602">.</span><span id="t23_602" class="t s6_602">error</span><span id="t24_602" class="t s8_602">(</span><span id="t25_602" class="t s6_602">err</span><span id="t26_602" class="t s8_602">); </span>
<span id="t27_602" class="t s6_602">callback</span><span id="t28_602" class="t s8_602">(</span><span id="t29_602" class="t s5_602">null</span><span id="t2a_602" class="t s8_602">); </span>
<span id="t2b_602" class="t s5_602">return</span><span id="t2c_602" class="t s8_602">; </span>
<span id="t2d_602" class="t s8_602">} </span>
<span id="t2e_602" class="t s5_602">let </span><span id="t2f_602" class="t s6_602">data </span><span id="t2g_602" class="t s7_602">= </span><span id="t2h_602" class="t s5_602">null</span><span id="t2i_602" class="t s8_602">; </span>
<span id="t2j_602" class="t s5_602">try </span><span id="t2k_602" class="t s8_602">{ </span>
<span id="t2l_602" class="t s6_602">data </span><span id="t2m_602" class="t s7_602">= </span><span id="t2n_602" class="t s6_602">JSON</span><span id="t2o_602" class="t s8_602">.</span><span id="t2p_602" class="t s6_602">parse</span><span id="t2q_602" class="t s8_602">(</span><span id="t2r_602" class="t s6_602">text</span><span id="t2s_602" class="t s8_602">); </span>
<span id="t2t_602" class="t s8_602">} </span><span id="t2u_602" class="t s5_602">catch</span><span id="t2v_602" class="t s8_602">(</span><span id="t2w_602" class="t s6_602">e</span><span id="t2x_602" class="t s8_602">) { </span><span id="t2y_602" class="t sa_602">// Something went wrong parsing the file contents </span>
<span id="t2z_602" class="t s6_602">console</span><span id="t30_602" class="t s8_602">.</span><span id="t31_602" class="t s6_602">error</span><span id="t32_602" class="t s8_602">(</span><span id="t33_602" class="t s6_602">e</span><span id="t34_602" class="t s8_602">); </span>
<span id="t35_602" class="t s8_602">} </span>
<span id="t36_602" class="t s6_602">callback</span><span id="t37_602" class="t s8_602">(</span><span id="t38_602" class="t s6_602">data</span><span id="t39_602" class="t s8_602">); </span>
<span id="t3a_602" class="t sb_602">584 </span><span id="t3b_602" class="t sb_602">| </span><span id="t3c_602" class="t sb_602">Chapter 16: Server-Side JavaScript with Node </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
