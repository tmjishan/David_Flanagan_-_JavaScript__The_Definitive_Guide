<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p618" style="overflow: hidden; position: relative; background-color: white; width: 770px; height: 1010px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_618{left:188px;bottom:910px;letter-spacing:-0.01px;}
#t2_618{left:240px;bottom:910px;}
#t3_618{left:246px;bottom:910px;letter-spacing:-0.01px;}
#t4_618{left:272px;bottom:910px;}
#t5_618{left:415px;bottom:910px;letter-spacing:-0.01px;}
#t6_618{left:162px;bottom:894px;letter-spacing:-0.01px;}
#t7_618{left:136px;bottom:878px;}
#t8_618{left:136px;bottom:847px;letter-spacing:-0.01px;}
#t9_618{left:136px;bottom:832px;letter-spacing:-0.01px;}
#ta_618{left:162px;bottom:832px;letter-spacing:-0.01px;}
#tb_618{left:194px;bottom:832px;}
#tc_618{left:207px;bottom:832px;letter-spacing:-0.01px;}
#td_618{left:253px;bottom:832px;}
#te_618{left:259px;bottom:832px;letter-spacing:-0.01px;}
#tf_618{left:285px;bottom:832px;}
#tg_618{left:292px;bottom:832px;}
#th_618{left:298px;bottom:832px;}
#ti_618{left:318px;bottom:832px;}
#tj_618{left:337px;bottom:832px;}
#tk_618{left:350px;bottom:832px;letter-spacing:-0.01px;}
#tl_618{left:396px;bottom:832px;}
#tm_618{left:402px;bottom:832px;letter-spacing:-0.01px;}
#tn_618{left:428px;bottom:832px;}
#to_618{left:435px;bottom:832px;}
#tp_618{left:441px;bottom:832px;letter-spacing:-0.01px;}
#tq_618{left:136px;bottom:816px;letter-spacing:-0.01px;}
#tr_618{left:181px;bottom:816px;}
#ts_618{left:188px;bottom:816px;letter-spacing:-0.01px;}
#tt_618{left:207px;bottom:816px;}
#tu_618{left:214px;bottom:816px;letter-spacing:-0.01px;}
#tv_618{left:305px;bottom:816px;letter-spacing:-0.01px;}
#tw_618{left:318px;bottom:816px;letter-spacing:-0.01px;}
#tx_618{left:344px;bottom:816px;}
#ty_618{left:357px;bottom:816px;}
#tz_618{left:376px;bottom:816px;letter-spacing:-0.01px;}
#t10_618{left:389px;bottom:816px;letter-spacing:-0.01px;}
#t11_618{left:402px;bottom:816px;}
#t12_618{left:409px;bottom:816px;letter-spacing:-0.01px;}
#t13_618{left:435px;bottom:816px;letter-spacing:-0.01px;}
#t14_618{left:136px;bottom:800px;letter-spacing:-0.01px;}
#t15_618{left:188px;bottom:800px;}
#t16_618{left:194px;bottom:800px;letter-spacing:-0.01px;}
#t17_618{left:220px;bottom:800px;}
#t18_618{left:233px;bottom:800px;letter-spacing:-0.01px;}
#t19_618{left:246px;bottom:800px;}
#t1a_618{left:259px;bottom:800px;letter-spacing:-0.01px;}
#t1b_618{left:285px;bottom:800px;}
#t1c_618{left:305px;bottom:800px;}
#t1d_618{left:162px;bottom:785px;letter-spacing:-0.01px;}
#t1e_618{left:181px;bottom:785px;}
#t1f_618{left:188px;bottom:785px;letter-spacing:-0.01px;}
#t1g_618{left:207px;bottom:785px;letter-spacing:-0.01px;}
#t1h_618{left:188px;bottom:769px;letter-spacing:-0.01px;}
#t1i_618{left:233px;bottom:769px;}
#t1j_618{left:240px;bottom:769px;letter-spacing:-0.01px;}
#t1k_618{left:272px;bottom:769px;}
#t1l_618{left:279px;bottom:769px;letter-spacing:-0.01px;}
#t1m_618{left:298px;bottom:769px;letter-spacing:-0.01px;}
#t1n_618{left:162px;bottom:754px;}
#t1o_618{left:175px;bottom:754px;letter-spacing:-0.01px;}
#t1p_618{left:207px;bottom:754px;}
#t1q_618{left:188px;bottom:738px;letter-spacing:-0.01px;}
#t1r_618{left:233px;bottom:738px;}
#t1s_618{left:240px;bottom:738px;letter-spacing:-0.01px;}
#t1t_618{left:259px;bottom:738px;}
#t1u_618{left:266px;bottom:738px;letter-spacing:-0.01px;}
#t1v_618{left:311px;bottom:738px;letter-spacing:-0.01px;}
#t1w_618{left:162px;bottom:723px;}
#t1x_618{left:136px;bottom:707px;letter-spacing:-0.01px;}
#t1y_618{left:110px;bottom:669px;letter-spacing:-0.14px;}
#t1z_618{left:110px;bottom:643px;letter-spacing:-0.03px;word-spacing:0.05px;}
#t20_618{left:110px;bottom:623px;letter-spacing:-0.04px;word-spacing:0.16px;}
#t21_618{left:557px;bottom:624px;letter-spacing:0.12px;}
#t22_618{left:606px;bottom:623px;letter-spacing:0.02px;}
#t23_618{left:110px;bottom:604px;letter-spacing:0.01px;word-spacing:1.68px;}
#t24_618{left:110px;bottom:585px;letter-spacing:-0.04px;word-spacing:2.25px;}
#t25_618{left:110px;bottom:565px;letter-spacing:0.02px;word-spacing:0.34px;}
#t26_618{left:305px;bottom:565px;letter-spacing:0.12px;}
#t27_618{left:355px;bottom:565px;letter-spacing:0.02px;word-spacing:0.34px;}
#t28_618{left:110px;bottom:545px;word-spacing:0.39px;}
#t29_618{left:468px;bottom:545px;letter-spacing:0.12px;}
#t2a_618{left:498px;bottom:545px;letter-spacing:0.02px;word-spacing:0.38px;}
#t2b_618{left:110px;bottom:525px;word-spacing:0.75px;}
#t2c_618{left:110px;bottom:506px;letter-spacing:-0.02px;word-spacing:1.03px;}
#t2d_618{left:110px;bottom:486px;letter-spacing:0.02px;word-spacing:2.24px;}
#t2e_618{left:474px;bottom:486px;letter-spacing:0.12px;}
#t2f_618{left:526px;bottom:486px;word-spacing:2.26px;}
#t2g_618{left:110px;bottom:466px;letter-spacing:-0.08px;word-spacing:1.13px;}
#t2h_618{left:375px;bottom:466px;letter-spacing:0.12px;}
#t2i_618{left:425px;bottom:466px;letter-spacing:-0.01px;word-spacing:1.06px;}
#t2j_618{left:597px;bottom:466px;letter-spacing:0.12px;}
#t2k_618{left:627px;bottom:466px;letter-spacing:-0.14px;word-spacing:1.19px;}
#t2l_618{left:110px;bottom:446px;letter-spacing:-0.02px;word-spacing:1.82px;}
#t2m_618{left:110px;bottom:426px;letter-spacing:-0.03px;word-spacing:1.26px;}
#t2n_618{left:435px;bottom:427px;letter-spacing:0.12px;}
#t2o_618{left:485px;bottom:426px;letter-spacing:0.02px;word-spacing:1.21px;}
#t2p_618{left:110px;bottom:407px;letter-spacing:-0.01px;word-spacing:0.03px;}
#t2q_618{left:110px;bottom:379px;letter-spacing:-0.04px;word-spacing:0.23px;}
#t2r_618{left:110px;bottom:359px;word-spacing:0.52px;}
#t2s_618{left:110px;bottom:340px;letter-spacing:-0.01px;word-spacing:0.68px;}
#t2t_618{left:110px;bottom:321px;letter-spacing:0.01px;word-spacing:1.81px;}
#t2u_618{left:110px;bottom:302px;word-spacing:2.21px;}
#t2v_618{left:110px;bottom:281px;letter-spacing:-0.01px;word-spacing:1.17px;}
#t2w_618{left:197px;bottom:282px;letter-spacing:0.12px;}
#t2x_618{left:247px;bottom:281px;letter-spacing:0.02px;}
#t2y_618{left:299px;bottom:282px;letter-spacing:0.12px;}
#t2z_618{left:334px;bottom:281px;letter-spacing:0.01px;}
#t30_618{left:353px;bottom:282px;letter-spacing:0.12px;}
#t31_618{left:411px;bottom:281px;letter-spacing:0.02px;}
#t32_618{left:463px;bottom:282px;letter-spacing:0.12px;}
#t33_618{left:501px;bottom:281px;letter-spacing:0.02px;word-spacing:1.15px;}
#t34_618{left:110px;bottom:261px;letter-spacing:0.02px;word-spacing:1.82px;}
#t35_618{left:283px;bottom:262px;letter-spacing:0.12px;}
#t36_618{left:349px;bottom:261px;letter-spacing:0.01px;}
#t37_618{left:369px;bottom:262px;letter-spacing:0.12px;}
#t38_618{left:412px;bottom:261px;letter-spacing:-0.01px;word-spacing:1.85px;}
#t39_618{left:110px;bottom:242px;letter-spacing:0.01px;word-spacing:0.01px;}
#t3a_618{left:110px;bottom:214px;word-spacing:0.78px;}
#t3b_618{left:110px;bottom:194px;letter-spacing:-0.01px;word-spacing:0.29px;}
#t3c_618{left:110px;bottom:175px;word-spacing:2.71px;}
#t3d_618{left:110px;bottom:156px;letter-spacing:-0.02px;word-spacing:2.01px;}
#t3e_618{left:110px;bottom:136px;letter-spacing:0.12px;}
#t3f_618{left:182px;bottom:136px;letter-spacing:-0.08px;}
#t3g_618{left:110px;bottom:59px;letter-spacing:-0.08px;}
#t3h_618{left:141px;bottom:59px;}
#t3i_618{left:157px;bottom:59px;letter-spacing:-0.08px;}

.s1_618{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#008;}
.s2_618{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#000;}
.s3_618{font-size:13px;font-family:UbuntuMono-Bold_7zh;color:#069;}
.s4_618{font-size:13px;font-family:UbuntuMono-Italic_7zm;color:#35586C;}
.s5_618{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#555;}
.s6_618{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#F60;}
.s7_618{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#C30;}
.s8_618{font-size:13px;font-family:UbuntuMono-Regular_7zr;color:#A00;}
.s9_618{font-size:18px;font-family:MyriadPro-SemiboldCond_7yc;color:#000;}
.sa_618{font-size:16px;font-family:MinionPro-Regular_7yv;color:#000;}
.sb_618{font-size:15px;font-family:UbuntuMono-Regular_7zr;color:#000;}
.sc_618{font-size:14px;font-family:MyriadPro-SemiboldCond_7yc;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts618" type="text/css" >

@font-face {
	font-family: MinionPro-Regular_7yv;
	src: url("fonts/MinionPro-Regular_7yv.woff") format("woff");
}

@font-face {
	font-family: MyriadPro-SemiboldCond_7yc;
	src: url("fonts/MyriadPro-SemiboldCond_7yc.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Bold_7zh;
	src: url("fonts/UbuntuMono-Bold_7zh.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Italic_7zm;
	src: url("fonts/UbuntuMono-Italic_7zm.woff") format("woff");
}

@font-face {
	font-family: UbuntuMono-Regular_7zr;
	src: url("fonts/UbuntuMono-Regular_7zr.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg618Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg618" style="-webkit-user-select: none;"><svg id="pdf618" width="770" height="1010" viewBox="0 0 770 1010" style="width:770px; height:1010px; -moz-transform:scale(1); z-index: 0; isolation: isolate;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<clipPath id="c0_618"><path d="M110,930.3v-4.7H660v4.7Z"/></clipPath>
<style type="text/css"><![CDATA[
.g0_618{
fill: none;
stroke: #000;
stroke-width: 0.381;
stroke-linecap: round;
stroke-miterlimit: 10;
}
]]></style>
</defs>
<path clip-path="url(#c0_618)" d="M660,927.9H110" class="g0_618"/>
</svg></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_618" class="t s1_618">callback</span><span id="t2_618" class="t s2_618">(</span><span id="t3_618" class="t s3_618">null</span><span id="t4_618" class="t s2_618">); </span><span id="t5_618" class="t s4_618">// call the callback with no error. </span>
<span id="t6_618" class="t s2_618">}); </span>
<span id="t7_618" class="t s2_618">} </span>
<span id="t8_618" class="t s4_618">// Here's a simple command-line utility to copy files </span>
<span id="t9_618" class="t s3_618">let </span><span id="ta_618" class="t s1_618">from </span><span id="tb_618" class="t s5_618">= </span><span id="tc_618" class="t s1_618">process</span><span id="td_618" class="t s2_618">.</span><span id="te_618" class="t s1_618">argv</span><span id="tf_618" class="t s2_618">[</span><span id="tg_618" class="t s6_618">2</span><span id="th_618" class="t s2_618">], </span><span id="ti_618" class="t s1_618">to </span><span id="tj_618" class="t s5_618">= </span><span id="tk_618" class="t s1_618">process</span><span id="tl_618" class="t s2_618">.</span><span id="tm_618" class="t s1_618">argv</span><span id="tn_618" class="t s2_618">[</span><span id="to_618" class="t s6_618">3</span><span id="tp_618" class="t s2_618">]; </span>
<span id="tq_618" class="t s1_618">console</span><span id="tr_618" class="t s2_618">.</span><span id="ts_618" class="t s1_618">log</span><span id="tt_618" class="t s2_618">(</span><span id="tu_618" class="t s7_618">`Copying file </span><span id="tv_618" class="t s8_618">${</span><span id="tw_618" class="t s1_618">from</span><span id="tx_618" class="t s8_618">} </span><span id="ty_618" class="t s7_618">to </span><span id="tz_618" class="t s8_618">${</span><span id="t10_618" class="t s1_618">to</span><span id="t11_618" class="t s8_618">}</span><span id="t12_618" class="t s7_618">...`</span><span id="t13_618" class="t s2_618">); </span>
<span id="t14_618" class="t s1_618">copyFile</span><span id="t15_618" class="t s2_618">(</span><span id="t16_618" class="t s1_618">from</span><span id="t17_618" class="t s2_618">, </span><span id="t18_618" class="t s1_618">to</span><span id="t19_618" class="t s2_618">, </span><span id="t1a_618" class="t s1_618">err </span><span id="t1b_618" class="t s5_618">=&gt; </span><span id="t1c_618" class="t s2_618">{ </span>
<span id="t1d_618" class="t s3_618">if </span><span id="t1e_618" class="t s2_618">(</span><span id="t1f_618" class="t s1_618">err</span><span id="t1g_618" class="t s2_618">) { </span>
<span id="t1h_618" class="t s1_618">console</span><span id="t1i_618" class="t s2_618">.</span><span id="t1j_618" class="t s1_618">error</span><span id="t1k_618" class="t s2_618">(</span><span id="t1l_618" class="t s1_618">err</span><span id="t1m_618" class="t s2_618">); </span>
<span id="t1n_618" class="t s2_618">} </span><span id="t1o_618" class="t s3_618">else </span><span id="t1p_618" class="t s2_618">{ </span>
<span id="t1q_618" class="t s1_618">console</span><span id="t1r_618" class="t s2_618">.</span><span id="t1s_618" class="t s1_618">log</span><span id="t1t_618" class="t s2_618">(</span><span id="t1u_618" class="t s7_618">"done."</span><span id="t1v_618" class="t s2_618">); </span>
<span id="t1w_618" class="t s2_618">} </span>
<span id="t1x_618" class="t s2_618">}); </span>
<span id="t1y_618" class="t s9_618">Paused mode </span>
<span id="t1z_618" class="t sa_618">The other mode for Readable streams is “paused mode.” This is the mode that streams </span>
<span id="t20_618" class="t sa_618">start in. If you never register a “data” event handler and never call the </span><span id="t21_618" class="t sb_618">pipe() </span><span id="t22_618" class="t sa_618">method, </span>
<span id="t23_618" class="t sa_618">then a Readable stream remains in paused mode. In paused mode, the stream does </span>
<span id="t24_618" class="t sa_618">not push data to you in the form of “data” events. Instead, you pull data from the </span>
<span id="t25_618" class="t sa_618">stream by explicitly calling its </span><span id="t26_618" class="t sb_618">read() </span><span id="t27_618" class="t sa_618">method. This is not a blocking call, and if there </span>
<span id="t28_618" class="t sa_618">is no data available to read on the stream, it will return </span><span id="t29_618" class="t sb_618">null</span><span id="t2a_618" class="t sa_618">. Since there is not a syn‐ </span>
<span id="t2b_618" class="t sa_618">chronous API to wait for data, the paused mode API is also event-based. A Readable </span>
<span id="t2c_618" class="t sa_618">stream in paused mode emits “readable” events when data becomes available to read </span>
<span id="t2d_618" class="t sa_618">on the stream. In response, your code should call the </span><span id="t2e_618" class="t sb_618">read() </span><span id="t2f_618" class="t sa_618">method to read that </span>
<span id="t2g_618" class="t sa_618">data. You must do this in a loop, calling </span><span id="t2h_618" class="t sb_618">read() </span><span id="t2i_618" class="t sa_618">repeatedly until it returns </span><span id="t2j_618" class="t sb_618">null</span><span id="t2k_618" class="t sa_618">. It is </span>
<span id="t2l_618" class="t sa_618">necessary to completely drain the stream’s buffer like this in order to trigger a new </span>
<span id="t2m_618" class="t sa_618">“readable” event in the future. If you stop calling </span><span id="t2n_618" class="t sb_618">read() </span><span id="t2o_618" class="t sa_618">while there is still readable </span>
<span id="t2p_618" class="t sa_618">data, you will not get another “readable” event and your program is likely to hang. </span>
<span id="t2q_618" class="t sa_618">Streams in paused mode emit “end” and “error” events just like flowing mode streams </span>
<span id="t2r_618" class="t sa_618">do. If you are writing a program that reads data from a Readable stream and writes it </span>
<span id="t2s_618" class="t sa_618">to a Writable stream, then paused mode may not be a good choice. In order to prop‐ </span>
<span id="t2t_618" class="t sa_618">erly handle backpressure, you only want to read when the input stream is readable </span>
<span id="t2u_618" class="t sa_618">and the output stream is not backed up. In paused mode, that means reading and </span>
<span id="t2v_618" class="t sa_618">writing until </span><span id="t2w_618" class="t sb_618">read() </span><span id="t2x_618" class="t sa_618">returns </span><span id="t2y_618" class="t sb_618">null </span><span id="t2z_618" class="t sa_618">or </span><span id="t30_618" class="t sb_618">write() </span><span id="t31_618" class="t sa_618">returns </span><span id="t32_618" class="t sb_618">false</span><span id="t33_618" class="t sa_618">, and then starting read‐ </span>
<span id="t34_618" class="t sa_618">ing or writing again on a </span><span id="t35_618" class="t sb_618">readable </span><span id="t36_618" class="t sa_618">or </span><span id="t37_618" class="t sb_618">drain </span><span id="t38_618" class="t sa_618">event. This is inelegant, and you may </span>
<span id="t39_618" class="t sa_618">find that flowing mode (or pipes) is easier in this case. </span>
<span id="t3a_618" class="t sa_618">The following code demonstrates how you can compute a SHA256 hash for the con‐ </span>
<span id="t3b_618" class="t sa_618">tents of a specified file. It uses a Readable stream in paused mode to read the contents </span>
<span id="t3c_618" class="t sa_618">of a file in chunks, then passes each chunk to the object that computes the hash. </span>
<span id="t3d_618" class="t sa_618">(Note that in Node 12 and later, it would be simpler to write this function using a </span>
<span id="t3e_618" class="t sb_618">for/await </span><span id="t3f_618" class="t sa_618">loop.) </span>
<span id="t3g_618" class="t sc_618">600 </span><span id="t3h_618" class="t sc_618">| </span><span id="t3i_618" class="t sc_618">Chapter 16: Server-Side JavaScript with Node </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
